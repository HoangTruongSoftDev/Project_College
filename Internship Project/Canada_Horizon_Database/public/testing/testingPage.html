<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, width=device-width" />
  <style>
    /* Custom styles for the container */
    .frame {
      display: inline-block;
      border: 1px solid blue;
      /* Set border color */
      padding: 10px;
      /* Add some padding */
      border-radius: 5px;
      /* Add rounded corners */
    }

    /* Custom styles for the label */
    .date-label {
      color: white;
      margin-right: 10px;
      /* Add some space between label and input */
    }

    /* Custom styles for the input */
    .date-container input[type="date"] {
      background-color: blue;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      width: 180px;
      /* Adjust as needed */
    }
  </style>
</head>

<body>
    <input type="file" id="fileInput">
    <button id="downloadButton">Download</button>
    <div id="result"></div>
    <div id="uploadedFile"></div>
    <img id="imageView" src="" alt="Image Viewer"><br>
    <script>

        document.getElementById('downloadButton').addEventListener('click', async () => {
            // const fileInput = document.getElementById('fileInput');
            // if (fileInput.files.length > 0) {
            //     const filePath = fileInput.files[0].path;
            //     const result = await window.api.uploadFileAPI(filePath);
            //     const resultDiv = document.getElementById('result');
            //     console.log(result)

            //     if (result.success == true) {
            //         resultDiv.innerText = 'File uploaded successfully! File ID: ' + result.fileId;
            //         console.log(result.fileId)
            //         const fileResult = await window.api.getFile(result.fileId);
                    
            //         if (fileResult.success == true) {
            //             const uploadedFileDiv = document.getElementById('uploadedFile');
            //             const blob = new Blob([fileResult.fileBuffer], { type: 'application/octet-stream' });
            //             const url = URL.createObjectURL(blob);
            //             const a = document.createElement('a');
            //             a.href = url;
            //             a.download = 'downloadedFile';
            //             a.innerText = 'Download File';
            //             uploadedFileDiv.appendChild(a);
            //         } else {
            //             resultDiv.innerText = 'Error: ' + fileResult.error;
            //         }
            //     } else {
            //         resultDiv.innerText = 'Error: ' + result.error;
            //     }
            // } else {
            //     document.getElementById('result').innerText = 'No file selected.';
            // }
            // try {
            //   const filePath = await window.api.viewFileAPI("6659f3515ea6d79ed182d883");
            //   console.log(filePath)
            //   imageView.src = filePath;
            //   await openFileWindow(filePath)
            // }
            // catch (err) {
            //   console.log("error: ")
            //   console.log(err)
            // }
            window.location.href = "../worker-page-modify.html?id=6659f3515ea6d79ed182d888";
        });
        async function openFileWindow(filePath) {
            // Invoke the 'open-file-window' IPC handler in the main process
            await window.api.displayFileAPI(filePath);
        }
        const imageView = document.getElementById('imageView');
        
    </script>
</body>

</html>